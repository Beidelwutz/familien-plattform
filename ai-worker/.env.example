# ===========================================
# AI Worker Environment Variables
# ===========================================
# For Railway deployment, set these in Railway Dashboard > Variables
# Required variables are marked with [REQUIRED]

# Database (not used directly by worker)
DATABASE_URL=postgresql://familien:familien_dev_password@localhost:5432/familien_lokal

# Redis (for job queue - optional, fallback to sync processing)
REDIS_URL=redis://localhost:6379

# Server
PORT=5000  # [AUTO] Railway sets this automatically
DEBUG=true  # [REQUIRED] Set to "false" for production
LOG_LEVEL=INFO
LOG_FORMAT=json  # "json" (recommended for production) or "text"

# CORS - comma-separated list of allowed origins
# [REQUIRED] For production: https://kiezling.com,https://api.kiezling.com
CORS_ORIGINS=http://localhost:3000,http://localhost:4000

# Backend API (for sending crawled events)
# [REQUIRED] Production: https://api.kiezling.com
BACKEND_URL=http://localhost:4000

# Service Token for service-to-service authentication
# [REQUIRED] Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Must match SERVICE_TOKEN in backend environment
SERVICE_TOKEN=

# AI APIs (leave empty to disable AI features)
# [REQUIRED] At least one AI API key for classification/scoring
OPENAI_API_KEY=sk-your-openai-key
ANTHROPIC_API_KEY=

# AI Feature Flags
ENABLE_AI=true  # [REQUIRED] Global kill switch for AI features
AI_LOW_COST_MODE=false  # Use cheaper models when true (gpt-4o-mini)
AI_MAX_RETRIES=2  # Max retries for failed AI calls

# AI Budget Limits
AI_DAILY_LIMIT_USD=10.0
AI_MONTHLY_LIMIT_USD=200.0

# AI Model Configuration (optional - defaults shown)
OPENAI_MODEL=gpt-4o-mini
OPENAI_MODEL_LOW_COST=gpt-4o-mini
ANTHROPIC_MODEL=claude-3-haiku-20240307
AI_TEMPERATURE=0.3
AI_MAX_TOKENS=500

# Prompt Versions (for tracking)
CLASSIFIER_PROMPT_VERSION=2.0.0
SCORER_PROMPT_VERSION=2.0.0
PLANNER_PROMPT_VERSION=1.0.0

# Geocoding
NOMINATIM_USER_AGENT=kiezling-dev

# Karlsruhe center coordinates
DEFAULT_LAT=49.0069
DEFAULT_LNG=8.4037
DEFAULT_RADIUS_KM=30

# Queue settings
MAX_CONCURRENT_PER_DOMAIN=2
CRAWL_LOCK_TTL_SECONDS=600

# ===========================================
# RAILWAY PRODUCTION QUICK REFERENCE
# ===========================================
# Copy these to Railway Dashboard > Variables:
#
# DEBUG=false
# LOG_FORMAT=json
# LOG_LEVEL=INFO
# BACKEND_URL=https://api.kiezling.com
# SERVICE_TOKEN=<generate-with-crypto-randomBytes>
# CORS_ORIGINS=https://kiezling.com,https://api.kiezling.com
# OPENAI_API_KEY=sk-...
# ENABLE_AI=true
# AI_LOW_COST_MODE=false
# AI_DAILY_LIMIT_USD=10.0
# AI_MONTHLY_LIMIT_USD=200.0
# NOMINATIM_USER_AGENT=kiezling-prod
#
# Optional (if using Redis):
# REDIS_URL=redis://...
# ===========================================
