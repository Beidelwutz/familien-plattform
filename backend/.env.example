# Database
# Lokal (DIRECT_URL = gleiche URL wie DATABASE_URL):
DATABASE_URL="postgresql://familien:familien_dev_password@localhost:5432/familien_lokal?schema=public"
DIRECT_URL="postgresql://familien:familien_dev_password@localhost:5432/familien_lokal?schema=public"
# Supabase: Pooler für App, Direct für Migrations (prisma migrate deploy / db push)
# DATABASE_URL="postgresql://postgres.[REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true"
# DIRECT_URL="postgresql://postgres.[REF]:[PASSWORD]@db.[REF].supabase.co:5432/postgres"

# Redis (optional; ohne: AI-Batch-Live-Fortschritt 503, Batch laeuft trotzdem)
# Lokal: redis://localhost:6379
# Vercel/Prod: REDIS_URL aus Upstash oder Railway TCP Proxy setzen. Siehe docs/REDIS_SETUP.md
REDIS_URL="redis://localhost:6379"

# Server
PORT=4000
NODE_ENV=development

# CORS (comma-separated for multiple origins; Astro may use 3001 if 3000 is taken)
CORS_ORIGIN="http://localhost:3000,http://localhost:3001"
# CORS_ORIGIN="https://www.kiezling.com,https://your-app.vercel.app"

# AI Service
AI_WORKER_URL="http://localhost:5000"

# Geocoding
NOMINATIM_URL="https://nominatim.openstreetmap.org"
# GOOGLE_MAPS_API_KEY=""  # Optional, für besseres Geocoding

# JWT (legacy - kept for backward compatibility, Supabase Auth is preferred)
JWT_SECRET="your-secret-key-change-in-production"
JWT_EXPIRES_IN="7d"

# Supabase (for authentication)
# Get these from: Supabase Dashboard > Settings > API
SUPABASE_URL="https://your-project.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key"  # Keep this secret!

# Cron Authentication (for trending computation and source checks)
CRON_SECRET="your-cron-secret-change-in-production"

# Service Token (for AI-Worker to Backend communication)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SERVICE_TOKEN=""

# Email (Resend) - Domain muss bei Resend verifiziert sein
RESEND_API_KEY=""  # Get from https://resend.com/api-keys

# E-Mail Absender (alle @kiezling.com)
EMAIL_FROM="Kiezling <noreply@kiezling.com>"           # Standard für automatische E-Mails
EMAIL_FROM_SUPPORT="Kiezling Support <support@kiezling.com>"  # Für Support-E-Mails
EMAIL_FROM_TEAM="Kiezling Team <team@kiezling.com>"           # Für Newsletter/Digest
EMAIL_REPLY_TO="support@kiezling.com"                         # Reply-To Adresse

# Frontend URL (for email links)
FRONTEND_URL="http://localhost:3000"
